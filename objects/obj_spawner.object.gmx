<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// variables
// enemy odds
fishChance = max(60, 100 - global.wave);
lobsterChance = min(20, 0 + global.wave / 2);
squidChance = min(10, 0 + global.wave / 4);
bombChance = min(10, 0 + global.wave / 4);

// enemy weight
fishWeight = 10;
lobsterWeight = 20;
squidWeight = 35;
bombWeight = 35;

// enemy timers
fishTimer = 3;
lobsterTimer = 5;
squidTimer = 10;
bombTimer = 10;

// misc
scoreLimit = 1000 * global.wave; //perhaps clamp
spawning = true;
//weight = 0;
weightLimit = 50 * global.difficulty;
alarm[0] = room_speed * 2; //starting delay


//oh god
weightChange = 0;
weightGoal = 10 + (global.wave*13); //kill this much in weight to stop spawning
winDelay = 60;
win = 0;
enemyCount = 69;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// spawn wave
var fish = 0;
var lobster = 0;
var squid = 0;
var bomb = 0;

var weight = 0;
weight += instance_number(obj_enemy_fish) * fishWeight;
weight += instance_number(obj_enemy_lobster) * lobsterWeight;
weight += instance_number(obj_enemy_squid) * squidWeight;
weight += instance_number(obj_enemy_bomb) * bombWeight;

// see spawns
while (spawning) {
    // check if point limit achieved
    if (weight &gt; weightLimit - fishWeight) {
        spawning = false;
        break;
    }
    
    var rng = irandom(100);
    if (rng &lt;= bombChance &amp;&amp; weight + bombWeight &lt;= 100) {
        // bomb spawn
        bomb++;
        weight += bombWeight;
    } else if (rng &gt; bombChance &amp;&amp; rng &lt;= bombChance + squidChance &amp;&amp; weight + squidWeight &lt;= 100) {
        // squid spawn
        squid++;
        weight += squidWeight;
    } else if (rng &gt; bombChance + squidChance &amp;&amp; rng &lt;= bombChance + squidChance + lobsterChance &amp;&amp; weight + lobsterWeight &lt;= 100) {
        // lobster spawn
        lobster++;
        weight += lobsterWeight;
    } else {
        // fish spawn
        fish++;
        weight += fishWeight;
    }
}

// spawn the right amount
scr_spawnEnemies(fish, obj_enemy_fish, fishWeight);
scr_spawnEnemies(lobster, obj_enemy_lobster, lobsterWeight);
scr_spawnEnemies(squid, obj_enemy_squid, squidWeight);
scr_spawnEnemies(bomb, obj_enemy_bomb, bombWeight);

// reset timer
var newTimer = 0;
newTimer += instance_number(obj_enemy_fish) * fishTimer;
newTimer += instance_number(obj_enemy_lobster) * lobsterTimer;
newTimer += instance_number(obj_enemy_squid) * squidTimer;
newTimer += instance_number(obj_enemy_bomb) * bombTimer;

spawning = true;
alarm[0] = newTimer * room_speed;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///reduce time if no enemies
enemyCount = (instance_number(obj_enemy_fish)+instance_number(obj_enemy_squid)+instance_number(obj_enemy_bomb)+instance_number(obj_enemy_lobster));
if (alarm[0] &gt; 60)
    {
    if (enemyCount &lt;= 1)
        {
        alarm[0] = 60;
        }
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// end wave
if (weightChange &gt;= weightGoal)
    {
    alarm[0] = -1; //stop spawning
    if (enemyCount == 0)
        {
        win++;
        if (win &gt;= winDelay)
            {
            room_goto(rm_upgrades);
            }
        }
    
    }










// win condition, amount of points scored?
/*
if (instance_find(obj_player, 0).score &gt;= scoreLimit) {
    // stop spawner
    alarm[0] = -1;
    // do a test to see if all enemies are dead here to advance to next level or sth
    if (allEnemiesDed) {
        room_goto()
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// debugging
var fish = instance_number(obj_enemy_fish)
var lobster = instance_number(obj_enemy_lobster)
var squid = instance_number(obj_enemy_squid)
var bomb = instance_number(obj_enemy_bomb)
var weight = (fish * fishWeight) + (lobster * lobsterWeight) + (squid * squidWeight) + (bomb * bombWeight);

var totalChance = fishChance + lobsterChance + squidChance + bombChance;

draw_text_colour(450, 10, "Time: " + string(alarm[0]), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 30, "Fish: " + string(fish), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 50, "Lobster: " + string(lobster), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 70, "Squid: " + string(squid), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 90, "Bomb: " + string(bomb), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 110, "Weight: " + string(weight), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 130, "FishChance: " + string(fishChance), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 150, "LobsterChance: " + string(lobsterChance), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 170, "SquidChance: " + string(squidChance), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 190, "BombChance: " + string(bombChance), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 210, "totalChance: " + string(totalChance), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 230, "weightChange: " + string(weightChange), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 250, "weightGoal: " + string(weightGoal), c_black, c_black, c_black, c_black, 1);
draw_text_colour(450, 270, "win: " + string(win), c_black, c_black, c_black, c_black, 1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
